# Production Environment Variables Template
# Copy this file to .env.production and fill in your values

# ============================================================================
# BACKEND (Medusa) - Railway
# ============================================================================

# Core
NODE_ENV=production
PORT=9001

# Database (Railway Postgres or Supabase)
DATABASE_URL=postgresql://user:password@host:5432/cityos_medusa

# Redis (Railway Redis or Upstash)
REDIS_URL=redis://default:password@host:6379

# Secrets (Generate strong random strings)
JWT_SECRET=your-super-secret-jwt-key-min-32-chars
COOKIE_SECRET=your-super-secret-cookie-key-min-32-chars

# URLs
MEDUSA_BACKEND_URL=https://cityos-backend.railway.app
MEDUSA_ADMIN_URL=https://cityos-backend.railway.app/app

# CORS (Add your domains)
ADMIN_CORS=https://cityos-backend.railway.app,https://admin.yourdomain.com
STORE_CORS=https://yourdomain.com,https://www.yourdomain.com

# File Storage (Cloudflare R2 or AWS S3)
S3_BUCKET=cityos-medusa-uploads
S3_REGION=auto
S3_ACCESS_KEY_ID=your-r2-access-key
S3_SECRET_ACCESS_KEY=your-r2-secret-key
S3_ENDPOINT=https://account-id.r2.cloudflarestorage.com
S3_FILE_URL=https://cityos-uploads.yourdomain.com

# ============================================================================
# ORCHESTRATOR (Payload CMS) - Railway
# ============================================================================

# Core
NODE_ENV=production
PORT=3001

# Database (Separate Postgres for Payload)
DATABASE_URI=postgresql://user:password@host:5432/cityos_payload

# Secrets
PAYLOAD_SECRET=your-payload-secret-min-32-chars

# URLs
NEXT_PUBLIC_SERVER_URL=https://cityos-orchestrator.railway.app
PAYLOAD_PUBLIC_SERVER_URL=https://cityos-orchestrator.railway.app

# File Storage
PAYLOAD_CLOUD_STORAGE_ADAPTER=s3
PAYLOAD_CLOUD_BUCKET=cityos-payload-media
PAYLOAD_CLOUD_REGION=auto
PAYLOAD_CLOUD_ENDPOINT=https://account-id.r2.cloudflarestorage.com
PAYLOAD_CLOUD_ACCESS_KEY_ID=your-r2-access-key
PAYLOAD_CLOUD_SECRET_ACCESS_KEY=your-r2-secret-key

# Integration with Medusa
MEDUSA_BACKEND_URL=https://cityos-backend.railway.app
MEDUSA_ADMIN_TOKEN=your-admin-token

# ============================================================================
# STOREFRONT (TanStack Start) - Vercel
# ============================================================================

# Backend URLs
VITE_MEDUSA_BACKEND_URL=https://cityos-backend.railway.app
VITE_MEDUSA_PUBLISHABLE_KEY=pk_your_publishable_key_here

# Payload CMS
VITE_PAYLOAD_URL=https://cityos-orchestrator.railway.app

# Authentication
VITE_KEYCLOAK_URL=https://auth.yourdomain.com
VITE_KEYCLOAK_REALM=cityos
VITE_KEYCLOAK_CLIENT_ID=storefront

# Payment (Stripe)
VITE_STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key

# Analytics (Optional)
VITE_GA_TRACKING_ID=
VITE_SENTRY_DSN=

# ============================================================================
# EXTERNAL SERVICES (All Applications)
# ============================================================================

# Keycloak (Authentication)
KEYCLOAK_URL=https://auth.yourdomain.com
KEYCLOAK_REALM=cityos
KEYCLOAK_CLIENT_ID=cityos-backend
KEYCLOAK_CLIENT_SECRET=your-keycloak-client-secret

# Cerbos (Authorization)
CERBOS_URL=https://cerbos.yourdomain.com

# Stripe (Payments)
STRIPE_API_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Fleetbase (Logistics)
FLEETBASE_URL=https://fleetbase.yourdomain.com
FLEETBASE_API_KEY=your-fleetbase-api-key

# ERPNext (ERP Integration)
ERPNEXT_URL=https://erp.yourdomain.com
ERPNEXT_API_KEY=your-erpnext-api-key
ERPNEXT_API_SECRET=your-erpnext-api-secret

# SendGrid (Email)
SENDGRID_API_KEY=your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# New Relic (Monitoring)
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=CityOS

# ============================================================================
# NOTES
# ============================================================================

# 1. NEVER commit this file with real values to git
# 2. Use Railway/Vercel dashboard to set environment variables
# 3. Generate strong secrets: openssl rand -base64 32
# 4. Use different secrets for development/staging/production
# 5. Rotate secrets regularly (every 90 days)
# 6. Enable SSL/TLS for all URLs
# 7. Use connection pooling for databases
# 8. Set up monitoring and alerts
