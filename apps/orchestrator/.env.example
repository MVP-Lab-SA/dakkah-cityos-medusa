# ============================================
# REQUIRED ENVIRONMENT VARIABLES
# ============================================

# Core Configuration
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
PAYLOAD_PUBLIC_SERVER_URL=http://localhost:3000

# Payload CMS (REQUIRED)
PAYLOAD_SECRET=YOUR-SECRET-HERE-GENERATE-WITH-openssl-rand-base64-32
DATABASE_URL=postgresql://user:password@localhost:5432/cityos_orchestrator

# Database Extensions (REQUIRED for PostGIS + pgvector)
POSTGRES_ENABLE_POSTGIS=true
POSTGRES_ENABLE_PGVECTOR=true

# ============================================
# AUTHENTICATION & AUTHORIZATION (REQUIRED)
# ============================================

# Keycloak OIDC
KEYCLOAK_ISSUER_URL=https://keycloak.example.com/realms/cityos
KEYCLOAK_JWKS_URL=https://keycloak.example.com/realms/cityos/protocol/openid-connect/certs
KEYCLOAK_AUDIENCE=cityos-orchestrator
AUTH_JWT_CLOCK_TOLERANCE_SECONDS=60

# Cerbos Policy Decision Point
CERBOS_PDP_URL=https://cerbos.example.com
CERBOS_PDP_API_KEY=your-cerbos-api-key
CERBOS_REQUEST_TIMEOUT_MS=5000

# ============================================
# INTEGRATIONS (REQUIRED)
# ============================================

# Medusa Commerce Engine
MEDUSA_BASE_URL=https://api.medusa.example.com
MEDUSA_API_KEY=your-medusa-api-key
MEDUSA_WEBHOOK_SECRET=your-medusa-webhook-secret

# Fleetbase Logistics
FLEETBASE_BASE_URL=https://api.fleetbase.example.com
FLEETBASE_API_KEY=your-fleetbase-api-key
FLEETBASE_WEBHOOK_SECRET=your-fleetbase-webhook-secret

# ERPNext
ERPNEXT_BASE_URL=https://erp.example.com
ERPNEXT_API_KEY=your-erpnext-api-key
ERPNEXT_WEBHOOK_SECRET=your-erpnext-webhook-secret

# ============================================
# STORAGE (OPTIONAL - Defaults to local filesystem)
# ============================================

# S3-Compatible Storage (Optional)
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_REGION=us-east-1
# S3_BUCKET=cityos-media
# S3_ACCESS_KEY_ID=your-access-key
# S3_SECRET_ACCESS_KEY=your-secret-key

# ============================================
# SECURITY & CRON (REQUIRED)
# ============================================

# Cron Jobs Authentication
CRON_SECRET=YOUR-CRON-SECRET-GENERATE-WITH-openssl-rand-base64-32

# Webhook Security
WEBHOOK_REPLAY_WINDOW_SECONDS=300
API_KEY_HASH_SALT=YOUR-SALT-GENERATE-WITH-openssl-rand-base64-32

# ============================================
# OBSERVABILITY (OPTIONAL)
# ============================================

# OpenTelemetry
# OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.example.com
LOG_LEVEL=info

# ============================================
# GENERATION COMMANDS
# ============================================
# Generate secrets using:
# openssl rand -base64 32

# Test database connection:
# psql $DATABASE_URL

# Enable PostGIS extension:
# CREATE EXTENSION IF NOT EXISTS postgis;
# CREATE EXTENSION IF NOT EXISTS vector;
